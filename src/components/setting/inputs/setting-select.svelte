<script lang="ts" setup>
    import { ItemProperty } from "@/models/setting-model";
    import { SettingService } from "@/service/setting/SettingService";

    export let itemProperty: ItemProperty;
    let value = SettingService.ins.SettingConfig[itemProperty.key];

    async function selectChange() {
        await SettingService.ins.updateSettingCofnigValue(
            itemProperty.key,
            value,
        );
        if (itemProperty.afterUpdateCallback) {
            itemProperty.afterUpdateCallback(itemProperty.key, value);
        }
    }
</script>

<select
    class="b3-select fn__flex-center fn__size200"
    bind:value
    on:change={selectChange}
>
    {#each itemProperty.options as option}
        <option value={option.value}>{option.name}</option>
    {/each}
</select>
